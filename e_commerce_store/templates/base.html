<!DOCTYPE html>
{% load static i18n compress%}
{% get_current_language as LANGUAGE_CODE %}
<html lang="{{ LANGUAGE_CODE }}">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="x-ua-compatible" content="ie=edge" />
        <title>{% block title %}E-commerce store{% endblock title %}</title>
        <meta name="viewport" content="width=device-width" />
        <meta
            name="E_COMMERCEPLATFORM"
            content="An E-commerce platform built using Django"
        />
        <meta name="author" content="Mazin Alhaddad" />

        <link rel="icon" href="{% static 'images/favicons/favicon.ico' %}" />

        {% block css %}
            <!-- Latest compiled and minified Bootstrap CSS -->
            <!-- Your stuff: Third-party CSS libraries go here -->

            <!-- This file stores project-specific CSS -->
            {% compress css %}
                <link href="{% static 'css/halfmoon-variables.css' %}" rel="stylesheet" />
                <link href="{% static 'css/project.css' %}" rel="stylesheet" />
            {% endcompress %} {% endblock %}
        <!-- Le javascript ================================================== -->
        {# Placed at the top of the document so pages load faster with defer #}
        {%block javascript %}
            <!-- Bootstrap JS -->
            <script
                defer
                src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/js/bootstrap.min.js"
                integrity="sha512-OvBgP9A2JBgiRad/mM36mkzXSXaJE9BEIENnVEmeZdITvwT09xnxLtT4twkCa8m/loMbPHsvPl0T8lRGVBwjlQ=="
                crossorigin="anonymous"
                referrerpolicy="no-referrer"
            ></script>
            <!-- Your stuff: Third-party javascript libraries go here -->
            <script src="https://cdn.jsdelivr.net/npm/halfmoon@1.1.1/js/halfmoon.min.js"></script>
            <!-- place project specific Javascript in this file -->
            {% compress js %}
                <script defer src="{% static 'js/project.js' %}"></script>
                <script defer src="{% static 'js/halfmoon.js' %}"></script>
            {% endcompress %} {% endblock javascript %}
    </head>

    <body class="with-custom-webkit-scrollbars with-custom-css-scrollbars" data-dm-shortcut-enabled="true" data-set-preferred-mode-onload="true">
        <!-- Modals go here -->
        <!-- Reference: https://www.gethalfmoon.com/docs/modal -->

        <!-- Page wrapper start -->
        {% block page-wrapper %}
            <div class="page-wrapper with-navbar">
        {% endblock %}

        {% block sidebar %}
        {% endblock %}
        <!-- Sticky alerts (toasts), empty container -->
        <!-- Reference: https://www.gethalfmoon.com/docs/sticky-alerts-toasts -->
        <div class="sticky-alerts"></div>

        <!-- Navbar start -->
        <nav class="navbar ">  <!-- justify-content-between = justify-content: space-between -->
            <!-- Reference: https://www.gethalfmoon.com/docs/navbar -->
            <div class="navbar-content">
                <button class="btn btn-action" type="button" onclick="halfmoon.toggleSidebar()">
                    <i class="fa fa-bars" aria-hidden="true">â˜°</i>
                    <span class="sr-only">Toggle sidebar</span> <!-- sr-only = show only on screen readers -->
                </button>
            </div>
            <a href="{% url 'store:product_list' %}" class="navbar-brand">E-store</a>
            <!-- Navbar text -->
            <span class="navbar-text text-monospace hidden-sm-and-down">for all your needs</span> <!-- text-monospace = font-family shifted to monospace -->
            <!-- Navbar nav -->
            {% if request.user.is_authenticated %}
                <ul class="navbar-nav d-none d-md-flex ml-auto"> <!-- d-none = display: none, d-md-flex = display: flex on medium screens and up (width > 768px) -->
                    <li class="nav-item ">
                        {# URL provided by django-allauth/account/urls.py #}
                        <a class="nav-link" href="{% url 'users:detail' request.user.username %}">
                            My Account
                        </a>
                    </li>
                </ul>
                <ul class="navbar-nav d-flex d-md-flex"> <!-- d-none = display: none, d-md-flex = display: flex on medium screens and up (width > 768px) -->
                    <li class="nav-item">
                        {# URL provided by django-allauth/account/urls.py #}
                        <a class="nav-link" href="{% url 'account_logout' %}">Sign Out</a>
                    </li>
                </ul>
            {% else %} {% if ACCOUNT_ALLOW_REGISTRATION %}
                <ul class="navbar-nav d-flex d-md-flex ml-auto"> <!-- d-none = display: none, d-md-flex = display: flex on medium screens and up (width > 768px) -->
                    <li class="nav-item">
                        {# URL provided by django-allauth/account/urls.py #}
                        <a id="sign-up-link" class="nav-link hidden-sm-and-down" href="{% url 'account_signup' %}">Sign Up</a>
                    </li>
                </ul>
            {% endif %}
                <ul class="navbar-nav d-flex d-md-flex "> <!-- d-none = display: none, d-md-flex = display: flex on medium screens and up (width > 768px) -->
                    <li class="nav-item">
                        {# URL provided by django-allauth/account/urls.py #}
                        <a id="log-in-link" class="nav-link" href="{% url 'account_login' %}">Sign In</a>
                    </li>
                </ul>
            {% endif %}
            {% with total_items=cart|length %}
                {% if total_items > 0 %}
                    <ul class="navbar-nav hidden-sm-and-down">
                        <li class="nav-item justify-content-end">
                            <a class="nav-item nav-link" href="{% url "cart:cart_detail" %}">
                                My cart: {{ total_items }} item{{ total_items|pluralize }},
                                ${{ cart.get_total_price }}
                            </a>
                        </li>
                    </ul>
                {% else %}
                    <ul class="navbar-nav d-flex d-md-flex"> <!-- d-none = display: none, d-md-flex = display: flex on medium screens and up (width > 768px) -->
                        <span class="navbar-text">
                            Your cart is empty.
                        </span>
                {% endif %}
            {% endwith %}
        </ul>
        <!-- Navbar nav -->
    </nav>
    <!-- Navbar end -->

    <!-- Content wrapper start -->
    <div class="content-wrapper">
        <!--
        Add your page's main content here
        Examples:
        1. https://www.gethalfmoon.com/docs/content-and-cards/#building-a-page
        2. https://www.gethalfmoon.com/docs/grid-system/#building-a-dashboard
      -->
        <div class="container">
            {% if messages %} {% for message in messages %}
                <div
                    class="alert alert-dismissible {% if message.tags %}alert-{{ message.tags }}{% endif %}"
                >
                    {{ message }}
                    <button
                        type="button"
                        class="btn-close"
                        data-bs-dismiss="alert"
                        aria-label="Close"
                    ></button>
                </div>
            {% endfor %} {% endif %}
            <div id="content">{% block content %} </div>
            {% endblock content %}
            </div>
            <!-- /container -->
        </body>
    </html>
